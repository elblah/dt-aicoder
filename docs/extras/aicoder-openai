#!/bin/bash
# AI Coder Launcher for OpenAI Models
#
# This script provides a convenient way to run AI Coder with OpenAI models.
# It checks for required environment variables and sets up the proper
# configuration for OpenAI API access.

# Check if OPENAI_API_KEY environment variable is set
if [[ -z "$OPENAI_API_KEY" ]]; then
    echo "Error: OPENAI_API_KEY environment variable is not set"
    echo "Please set it with your OpenAI API key:"
    echo "  export OPENAI_API_KEY=your_api_key_here"
    echo "Then run this script again"
    exit 1
fi

# Default model (can be overridden)
DEFAULT_MODEL="gpt-4o"

# If MODEL environment variable is not set, use default
if [[ -z "$MODEL" ]]; then
    export MODEL=$DEFAULT_MODEL
    echo "Using default model: $MODEL"
else
    echo "Using model: $MODEL"
fi

# Set OpenAI-specific environment variables
export OPENAI_BASE_URL="https://api.openai.com/v1"
export OPENAI_MODEL=$MODEL

# Configure token limits for optimal performance
export AUTO_COMPACT_THRESHOLD=131072

# Run the main aicoder-start script
exec "$(dirname "$0")/aicoder-start"